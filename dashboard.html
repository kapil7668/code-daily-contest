<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CodeRush Dashboard â€“ Practice & Contests</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }
  </style>
</head>
<body class="min-h-screen text-slate-100 bg-slate-950 bg-[radial-gradient(circle_at_top,_rgba(45,212,191,0.23),_transparent_52%),radial-gradient(circle_at_bottom,_rgba(37,99,235,0.22),_transparent_55%)]">

<!-- Navbar -->
<header class="border-b border-slate-800/60 bg-slate-950/80 backdrop-blur sticky top-0 z-30">
  <nav class="max-w-6xl mx-auto flex items-center justify-between px-4 py-3">
    <div class="flex items-center gap-2">
      <div class="h-8 w-8 rounded-xl bg-gradient-to-br from-emerald-400 to-cyan-500 flex items-center justify-center text-slate-900 font-extrabold">C</div>
      <span class="font-semibold text-lg tracking-tight">CodeRush</span>
    </div>
    <div class="hidden md:flex items-center gap-5 text-sm">
      <button data-tab="explore" class="tab-btn text-emerald-400 border-b border-emerald-400 pb-1">Explore</button>
      <button data-tab="problems" class="tab-btn text-slate-300 hover:text-emerald-300">Problems</button>
      <button data-tab="contests" class="tab-btn text-slate-300 hover:text-emerald-300">Contests</button>
      <button data-tab="premium" class="tab-btn text-slate-300 hover:text-emerald-300">Premium</button>
    </div>
    <div class="flex items-center gap-3 text-xs">
      <span id="user-email" class="hidden sm:inline text-slate-300"></span>
      <button id="logout-btn" class="px-3 py-1.5 rounded-lg border border-slate-700 hover:border-red-400 hover:text-red-300">Logout</button>
    </div>
  </nav>
</header>

<main class="max-w-6xl mx-auto px-4 py-5 md:py-7 text-sm bg-slate-900/75 border border-slate-800/60 rounded-2xl shadow-[0_0_40px_rgba(15,23,42,0.95)] mt-6 mb-10">
  <!-- Explore Tab -->
  <section id="tab-explore" class="tab-page">
    <h1 class="text-xl md:text-2xl font-bold mb-1">Welcome to CodeRush</h1>
    <p class="text-slate-300 mb-4 text-xs md:text-sm">Pick a target, join a contest, and level up your DSA skills every single day on CodeRush.</p>

    <!-- Active contests - FIXED BUTTONS -->
    <section class="mt-4 md:mt-6">
      <div class="flex items-center justify-between mb-3">
        <h2 class="text-base md:text-lg font-semibold">Active contests</h2>
        <button class="text-[11px] text-emerald-400 hover:text-emerald-300" onclick="document.querySelector('[data-tab=contests]').click()">View all contests</button>
      </div>
      <div class="grid md:grid-cols-3 gap-4 text-xs">
        
        <!-- FREE DAILY âœ… -->
        <div class="bg-slate-800/80 border border-emerald-500/40 rounded-xl p-4 flex flex-col justify-between">
          <div>
            <p class="text-[11px] uppercase tracking-wide text-emerald-400 mb-1">Featured</p>
            <h3 class="font-semibold text-sm mb-1">Free Daily Rush</h3>
            <p class="text-slate-300 text-[11px] mb-2">3 problems â€¢ 60 mins â€¢ Live leaderboard.</p>
            <p class="text-slate-400 text-[11px]">Join anytime</p>
          </div>
          <button onclick="handleContestCTA('free', 200, 'daily')" class="mt-3 self-start px-3 py-1.5 rounded-lg bg-emerald-500 text-slate-900 text-[11px] font-semibold">Register now</button>
        </div>

        <!-- PAID â‚¹9 âœ… -->
        <div class="bg-slate-800/70 border border-amber-500/40 rounded-xl p-4 flex flex-col justify-between">
          <div>
            <p class="text-[11px] uppercase tracking-wide text-amber-400 mb-1">Pro</p>
            <h3 class="font-semibold text-sm mb-1">â‚¹9 Quick Rush</h3>
            <p class="text-slate-300 text-[11px] mb-2">45 mins â€¢ Top 10 win cash prizes</p>
          </div>
          <button onclick="handleContestCTA('paid', 9, 'quick')" class="mt-3 self-start px-3 py-1.5 rounded-lg border border-amber-400 text-amber-300 text-[11px] font-semibold">Join for â‚¹9</button>
        </div>

        <!-- PAID â‚¹49 âœ… -->
        <div class="bg-slate-800/70 border border-orange-500/40 rounded-xl p-4 flex flex-col justify-between">
          <div>
            <p class="text-[11px] uppercase tracking-wide text-orange-400 mb-1">Elite</p>
            <h3 class="font-semibold text-sm mb-1">â‚¹49 Pro Contest</h3>
            <p class="text-slate-300 text-[11px] mb-2">90 mins â€¢ Medium-Hard problems</p>
          </div>
          <button onclick="handleContestCTA('paid', 49, 'pro')" class="mt-3 self-start px-3 py-1.5 rounded-lg border border-orange-400 text-orange-300 text-[11px] font-semibold">Join for â‚¹49</button>
        </div>
      </div>
    </section>
  </section>
  <!-- Contests Tab - ALL BUTTONS FIXED -->
  <section id="tab-contests" class="tab-page hidden">
    <div class="flex items-center justify-between mb-3">
      <h2 class="text-lg font-semibold">Contests</h2>
      <button class="text-xs px-3 py-1.5 rounded-lg bg-emerald-500 text-slate-900 font-semibold">View rules</button>
    </div>
    <div class="grid md:grid-cols-2 gap-4 text-xs">
      
      <!-- FREE STARTER âœ… -->
      <article class="rounded-2xl bg-gradient-to-r from-emerald-500 via-emerald-400 to-cyan-400 text-emerald-950 shadow-xl">
        <div class="p-4 md:p-5 flex items-center justify-between gap-4">
          <div class="space-y-1">
            <p class="text-xs uppercase tracking-wide font-semibold opacity-90">Win prize</p>
            <p class="text-3xl md:text-4xl font-black leading-none">â‚¹1,000</p>
            <p class="mt-2 text-[11px] font-semibold uppercase">Free Contest</p>
            <h3 class="text-sm md:text-base font-bold">Free Starter Contest</h3>
            <p class="text-[11px] opacity-90">Min 200 students â€¢ Top 1 wins â‚¹1,000</p>
          </div>
          <div class="flex flex-col items-end gap-2">
            <span class="text-[11px]">Today 8PM</span>
            <button onclick="handleContestCTA('free', 200, 'starter')" class="px-4 py-2 rounded-xl bg-slate-900 text-emerald-300 text-[12px] font-semibold">Join test</button>
          </div>
        </div>
      </article>

      <!-- â‚¹9 QUICK âœ… -->
      <article class="rounded-2xl bg-gradient-to-r from-amber-500 via-orange-500 to-amber-400 text-amber-950 shadow-xl">
        <div class="p-4 md:p-5 flex items-center justify-between gap-4">
          <div class="space-y-1">
            <p class="text-xs uppercase tracking-wide font-semibold opacity-90">Win prize</p>
            <p class="text-3xl md:text-4xl font-black leading-none">â‚¹590</p>
            <p class="mt-2 text-[11px] font-semibold uppercase">Paid Contest</p>
            <h3 class="text-sm md:text-base font-bold">â‚¹9 Quick Rush</h3>
            <p class="text-[11px] opacity-90">45 mins â€¢ Top 10 paid (1st â‚¹300)</p>
          </div>
          <div class="flex flex-col items-end gap-2">
            <span class="text-[11px]">Live now</span>
            <button onclick="handleContestCTA('paid', 9, 'quick')" class="px-4 py-2 rounded-xl bg-slate-900 text-amber-200 text-[12px] font-semibold">Join for â‚¹9</button>
          </div>
        </div>
      </article>

      <!-- â‚¹49 PRO âœ… -->
      <article class="rounded-2xl bg-gradient-to-r from-orange-600 via-amber-500 to-yellow-400 text-amber-950 shadow-xl">
        <div class="p-4 md:p-5 flex items-center justify-between gap-4">
          <div class="space-y-1">
            <p class="text-xs uppercase tracking-wide font-semibold opacity-90">Win prize</p>
            <p class="text-3xl md:text-4xl font-black leading-none">â‚¹5,000</p>
            <p class="mt-2 text-[11px] font-semibold uppercase">Paid Contest</p>
            <h3 class="text-sm md:text-base font-bold">â‚¹49 Pro Rush</h3>
            <p class="text-[11px] opacity-90">90 mins â€¢ Top 20 paid</p>
          </div>
          <button onclick="handleContestCTA('paid', 49, 'pro')" class="px-4 py-2 rounded-xl bg-slate-900 text-amber-200 text-[12px] font-semibold">Join for â‚¹49</button>
        </div>
      </article>

      <!-- â‚¹99 ADVANCED âœ… -->
      <article class="rounded-2xl bg-gradient-to-r from-fuchsia-500 via-amber-500 to-orange-400 text-fuchsia-950 shadow-xl">
        <div class="p-4 md:p-5 flex items-center justify-between gap-4">
          <div class="space-y-1">
            <p class="text-xs uppercase tracking-wide font-semibold opacity-90">Win prize</p>
            <p class="text-3xl md:text-4xl font-black leading-none">â‚¹7,400</p>
            <p class="mt-2 text-[11px] font-semibold uppercase">Paid Contest</p>
            <h3 class="text-sm md:text-base font-bold">â‚¹99 Advanced</h3>
            <p class="text-[11px] opacity-90">Interview focused â€¢ Top 10 paid</p>
          </div>
          <button onclick="handleContestCTA('paid', 99, 'advanced')" class="px-4 py-2 rounded-xl bg-slate-900 text-amber-200 text-[12px] font-semibold">Join for â‚¹99</button>
        </div>
      </article>
    </div>
  </section>
  <!-- Problems + Premium Tabs (same as before) -->
  <section id="tab-problems" class="tab-page hidden">
    <h2 class="text-lg font-semibold mb-2">Practice problems</h2>
    <p class="text-[11px] text-slate-400 mb-3">Curated sets for interviews</p>
    <div class="grid md:grid-cols-3 gap-4">
      <div class="bg-slate-800/80 border border-slate-700 rounded-xl p-4">
        <h3 class="font-semibold text-sm mb-1">Beginner DSA</h3>
        <p class="text-[11px] text-slate-300 mb-2">Arrays, strings, hashing</p>
        <a href="#" class="px-3 py-1.5 rounded-lg border border-emerald-400 text-emerald-300 text-xs">Open set</a>
      </div>
      <div class="bg-slate-800/80 border border-slate-700 rounded-xl p-4">
        <h3 class="font-semibold text-sm mb-1">Core DSA</h3>
        <button class="px-3 py-1.5 rounded-lg border border-slate-600 text-slate-200 text-xs">Coming soon</button>
      </div>
      <div class="bg-slate-800/80 border border-slate-700 rounded-xl p-4">
        <h3 class="font-semibold text-sm mb-1">Company sheets</h3>
        <button class="px-3 py-1.5 rounded-lg border border-slate-600 text-slate-200 text-xs">Coming soon</button>
      </div>
    </div>
  </section>

  <section id="tab-premium" class="tab-page hidden">Premium content coming soon...</section>
</main>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.48.0/dist/umd/supabase.min.js"></script>
<script>
const SUPABASE_URL = 'https://tghtgygjawhrcgtwhrej.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRnaHRneWdqYXdocmNndHdocmVqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5OTM0MjksImV4cCI6MjA4MTU2OTQyOX0.Q-Ht_IFcPZPIHO5905o70EDya2yFdVP-9LjDmjkle38';
const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

// ðŸ”¥ FIXED CONTEST HANDLER âœ…
window.handleContestCTA = function(type, amount = 0, variant = '') {
  const contestId = type === 'free' ? `free-${amount || 200}` : `paid-${amount}`;
  window.location.href = `exam.html?contest=${contestId}`;
};

// Auth + Tabs (same as before)
(async () => {
  const { data } = await supabaseClient.auth.getUser();
  if (!data.user) window.location.href = 'index.html';
  document.getElementById('user-email').textContent = data.user.email;
})();
document.getElementById('logout-btn').onclick = () => supabaseClient.auth.signOut().then(() => location.href='index.html');

// Tab switching
document.querySelectorAll('.tab-btn').forEach(btn => {
  btn.onclick = () => {
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('text-emerald-400','border-b','border-emerald-400'));
    btn.classList.add('text-emerald-400','border-b','border-emerald-400');
    document.querySelectorAll('.tab-page').forEach(page => page.classList.add('hidden'));
    document.getElementById(`tab-${btn.dataset.tab}`).classList.remove('hidden');
  };
});
</script>
</body>
</html>
