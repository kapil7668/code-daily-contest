<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CodeRush Problem – Solve & Run</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }
    textarea::-webkit-scrollbar, pre::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }
    textarea::-webkit-scrollbar-thumb, pre::-webkit-scrollbar-thumb {
      background: #4b5563;
      border-radius: 999px;
    }
  </style>
</head>
<body class="bg-slate-900 text-slate-100">

<!-- Top bar -->
<header class="border-b border-slate-800 bg-slate-900/95 backdrop-blur sticky top-0 z-30">
  <nav class="max-w-6xl mx-auto flex items-center justify-between px-4 py-2.5 text-xs">
    <div class="flex items-center gap-2">
      <a href="dashboard.html" class="flex items-center gap-2">
        <div class="h-7 w-7 rounded-xl bg-gradient-to-br from-emerald-400 to-cyan-500 flex items-center justify-center text-slate-900 font-extrabold">
          C
        </div>
        <span class="font-semibold text-sm tracking-tight">CodeRush</span>
      </a>
      <span class="mx-2 text-slate-600">/</span>
      <span id="problem-title-top" class="text-slate-200"></span>
    </div>
    <div class="flex items-center gap-3">
      <select id="lang-select" class="bg-slate-900 border border-slate-700 rounded-lg px-2 py-1">
        <option value="cpp">C++</option>
        <option value="java">Java</option>
        <option value="py">Python</option>
      </select>
      <button id="run-code" class="px-3 py-1.5 rounded-lg bg-slate-700 hover:bg-slate-600 text-xs">
        Run
      </button>
      <button id="submit-code" class="px-3 py-1.5 rounded-lg bg-emerald-500 hover:bg-emerald-400 text-slate-900 font-semibold text-xs">
        Submit
      </button>
    </div>
  </nav>
</header>

<main class="max-w-6xl mx-auto px-4 py-4 text-xs md:text-sm">
  <div class="grid md:grid-cols-2 gap-4 md:gap-5">

    <!-- Left: problem description -->
    <section class="bg-slate-900 rounded-xl border border-slate-800 p-4 overflow-y-auto max-h-[80vh]">
      <div class="flex items-center justify-between mb-2">
        <div>
          <h1 id="problem-title" class="text-sm md:text-base font-semibold mb-1"></h1>
          <div class="flex items-center gap-2 text-[11px]">
            <span id="problem-difficulty" class="px-2 py-0.5 rounded-full border border-slate-700"></span>
            <span id="problem-topic" class="text-slate-400"></span>
          </div>
        </div>
        <button onclick="history.back()" class="text-[11px] text-slate-400 hover:text-slate-200">
          ← Back
        </button>
      </div>

      <hr class="border-slate-800 mb-3" />

      <article class="space-y-3 text-[11px] md:text-xs leading-relaxed">
        <p id="problem-description" class="text-slate-200"></p>

        <div>
          <h2 class="font-semibold mb-1">Example 1:</h2>
          <pre id="example-1" class="bg-slate-900 border border-slate-800 rounded-lg p-2 text-[11px] overflow-x-auto"></pre>
        </div>

        <div>
          <h2 class="font-semibold mb-1">Example 2:</h2>
          <pre id="example-2" class="bg-slate-900 border border-slate-800 rounded-lg p-2 text-[11px] overflow-x-auto"></pre>
        </div>

        <div>
          <h2 class="font-semibold mb-1">Constraints:</h2>
          <ul id="constraints" class="list-disc list-inside text-slate-300 text-[11px] space-y-0.5"></ul>
        </div>
      </article>
    </section>

    <!-- Right: code editor + output -->
    <section class="space-y-3">
      <div class="bg-slate-900 rounded-xl border border-slate-800 p-3">
        <div class="flex items-center justify-between mb-2 text-[11px]">
          <span class="text-slate-300">Code</span>
          <button id="reset-code" class="text-slate-400 hover:text-slate-200">Reset code</button>
        </div>
        <textarea id="code-editor"
                  class="w-full h-52 md:h-64 bg-slate-900 border border-slate-800 rounded-lg text-[11px] p-2 font-mono text-slate-100 resize-none focus:outline-none focus:ring-1 focus:ring-emerald-500"></textarea>
      </div>

      <div class="bg-slate-900 rounded-xl border border-slate-800 p-3">
        <div class="flex items-center justify-between mb-2 text-[11px]">
          <span class="text-slate-300">Custom input</span>
          <button id="clear-input" class="text-slate-400 hover:text-slate-200">Clear</button>
        </div>
        <textarea id="custom-input"
                  class="w-full h-20 bg-slate-900 border border-slate-800 rounded-lg text-[11px] p-2 font-mono text-slate-100 resize-none focus:outline-none focus:ring-1 focus:ring-emerald-500"></textarea>
      </div>

      <div class="bg-slate-900 rounded-xl border border-slate-800 p-3">
        <div class="flex items-center justify-between mb-2 text-[11px]">
          <span class="text-slate-300">Output</span>
          <span id="output-status" class="text-[11px] text-slate-400"></span>
        </div>
        <pre id="output-area"
             class="w-full min-h-[60px] bg-slate-950 border border-slate-800 rounded-lg text-[11px] p-2 font-mono text-slate-100 overflow-x-auto"></pre>
      </div>
    </section>

  </div>
</main>

<script>
// simple "database" of problems (hardcoded for now)
const problems = {
  "two-sum": {
    title: "Two Sum",
    difficulty: "Easy",
    topic: "Arrays",
    description: "Given an array of integers nums and an integer target, return indices of the two numbers such that they add up to target.",
    example1: "Input: nums = [2,7,11,15], target = 9\nOutput: [0,1]\nExplanation: Because nums[0] + nums[1] == 9, we return [0, 1].",
    example2: "Input: nums = [3,2,4], target = 6\nOutput: [1,2]",
    constraints: [
      "2 ≤ nums.length ≤ 10^4",
      "-10^9 ≤ nums[i] ≤ 10^9",
      "-10^9 ≤ target ≤ 10^9",
      "Exactly one valid answer exists."
    ],
    templates: {
      cpp: `class Solution {
public:
    vector<int> twoSum(vector<int>& nums, int target) {
        
    }
};`,
      java: `class Solution {
    public int[] twoSum(int[] nums, int target) {
        
    }
}`,
      py: `class Solution:
    def twoSum(self, nums: List[int], target: int) -> List[int]:
        pass`
    }
  },
  "longest-substring": {
    title: "Longest Substring Without Repeating Characters",
    difficulty: "Medium",
    topic: "Strings",
    description: "Given a string s, find the length of the longest substring without repeating characters.",
    example1: "Input: s = \"abcabcbb\"\nOutput: 3\nExplanation: The answer is \"abc\", with the length of 3.",
    example2: "Input: s = \"bbbbb\"\nOutput: 1\nExplanation: The answer is \"b\", with the length of 1.",
    constraints: [
      "0 ≤ s.length ≤ 5 * 10^4",
      "s consists of English letters, digits, symbols and spaces."
    ],
    templates: {
      cpp: `class Solution {
public:
    int lengthOfLongestSubstring(string s) {
        
    }
};`,
      java: `class Solution {
    public int lengthOfLongestSubstring(String s) {
        
    }
}`,
      py: `class Solution:
    def lengthOfLongestSubstring(self, s: str) -> int:
        pass`
    }
  },
  "word-ladder": {
    title: "Word Ladder",
    difficulty: "Hard",
    topic: "Graphs",
    description: "Given two words beginWord and endWord, and a dictionary wordList, return the length of the shortest transformation sequence from beginWord to endWord.",
    example1: "Input: beginWord = \"hit\", endWord = \"cog\", wordList = [\"hot\",\"dot\",\"dog\",\"lot\",\"log\",\"cog\"]\nOutput: 5",
    example2: "Input: beginWord = \"hit\", endWord = \"cog\", wordList = [\"hot\",\"dot\",\"dog\",\"lot\",\"log\"]\nOutput: 0",
    constraints: [
      "1 ≤ beginWord.length ≤ 10",
      "endWord.length == beginWord.length",
      "1 ≤ wordList.length ≤ 5000"
    ],
    templates: {
      cpp: `class Solution {
public:
    int ladderLength(string beginWord, string endWord, vector<string>& wordList) {
        
    }
};`,
      java: `class Solution {
    public int ladderLength(String beginWord, String endWord, List<String> wordList) {
        
    }
}`,
      py: `class Solution:
    def ladderLength(self, beginWord: str, endWord: str, wordList: List[str]) -> int:
        pass`
    }
  }
};

// get which problem from URL query
const params = new URLSearchParams(window.location.search);
const slug = params.get('p') || 'two-sum';
const problem = problems[slug] || problems['two-sum'];

// fill problem data
document.getElementById('problem-title').textContent = problem.title;
document.getElementById('problem-title-top').textContent = problem.title;
document.getElementById('problem-difficulty').textContent = problem.difficulty;
document.getElementById('problem-topic').textContent = problem.topic;
document.getElementById('problem-description').textContent = problem.description;
document.getElementById('example-1').textContent = problem.example1;
document.getElementById('example-2').textContent = problem.example2;

// constraints list
const ul = document.getElementById('constraints');
problem.constraints.forEach(c => {
  const li = document.createElement('li');
  li.textContent = c;
  ul.appendChild(li);
});

// difficulty color
const diffChip = document.getElementById('problem-difficulty');
if (problem.difficulty === 'Easy') {
  diffChip.classList.add('text-emerald-400','border-emerald-500/60');
} else if (problem.difficulty === 'Medium') {
  diffChip.classList.add('text-amber-400','border-amber-500/60');
} else {
  diffChip.classList.add('text-red-400','border-red-500/60');
}

// language templates
const langSelect = document.getElementById('lang-select');
const codeEditor = document.getElementById('code-editor');

function loadTemplate() {
  const lang = langSelect.value;
  const template = problem.templates[lang] || '';
  codeEditor.value = template;
}
langSelect.addEventListener('change', loadTemplate);

// initial code
loadTemplate();

// reset / clear
document.getElementById('reset-code').onclick = loadTemplate;
document.getElementById('clear-input').onclick = () => {
  document.getElementById('custom-input').value = '';
};

// fake run / submit behaviour
const outputArea = document.getElementById('output-area');
const outputStatus = document.getElementById('output-status');

document.getElementById('run-code').onclick = () => {
  outputStatus.textContent = 'Running (dummy)...';
  setTimeout(() => {
    outputStatus.textContent = 'Finished';
    outputArea.textContent = 'This is a dummy run. Later this will call your backend / judge.';
  }, 400);
};

document.getElementById('submit-code').onclick = () => {
  outputStatus.textContent = 'Judging (dummy)...';
  setTimeout(() => {
    outputStatus.textContent = 'Submitted';
    outputArea.textContent = 'Submission stored locally. Later this will show real test case results.';
  }, 500);
};

// basic "auth" check
const email = localStorage.getItem('coderush_user_email');
if (!email) {
  window.location.href = 'index.html';
}
</script>

</body>
</html>
