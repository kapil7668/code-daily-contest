<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeRush - Live Contests</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body class="min-h-screen text-slate-100 bg-slate-950">
    
<!-- CONTEST SELECTION -->
<div id="contest-selection" class="max-w-4xl mx-auto px-4 py-12">
    <div class="text-center mb-12">
        <h1 class="text-5xl font-black bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent mb-4">üèÜ CodeRush Live</h1>
        <p class="text-xl text-slate-400">Join contests ‚Ä¢ Win real prizes ‚Ä¢ Practice LeetCode</p>
    </div>
    
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- FREE DAILY -->
        <div class="bg-slate-900/75 border border-slate-800/60 rounded-3xl p-8 hover:scale-105 transition-all cursor-pointer" onclick="startContest('free-daily')">
            <h3 class="text-2xl font-bold text-emerald-400 mb-4">Free Daily</h3>
            <p class="text-slate-400 mb-6">3 Easy LeetCode problems</p>
            <div class="w-full bg-emerald-500 text-slate-900 font-black py-4 px-8 rounded-2xl text-lg text-center">‚úÖ FREE JOIN</div>
        </div>
        
        <!-- QUICK 9‚Çπ PAID -->
        <div class="bg-slate-900/75 border border-slate-800/60 rounded-3xl p-8 hover:scale-105 transition-all cursor-pointer" onclick="startContest('quick-9')">
            <h3 class="text-2xl font-bold text-orange-400 mb-4">Quick 9‚Çπ</h3>
            <p class="text-slate-400 mb-6">Easy + Medium LeetCode</p>
            <div class="w-full bg-gradient-to-r from-orange-500 to-orange-400 text-slate-900 font-black py-4 px-8 rounded-2xl text-lg text-center">üí≥ Pay ‚Çπ9</div>
        </div>
    </div>
</div>

<!-- EXAM PAGE (Hidden) -->
<div id="exam-page" class="hidden min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900">
    <div class="max-w-4xl mx-auto px-4 py-8">
        <div class="flex justify-between items-center mb-8 bg-white/10 backdrop-blur-xl p-6 rounded-3xl border border-white/20">
            <h1 id="contest-title" class="text-3xl font-bold">Contest</h1>
            <div id="timer" class="text-2xl font-bold bg-red-500 px-6 py-3 rounded-full">‚è±Ô∏è 60:00</div>
        </div>
        <div id="problems-container" class="space-y-8"></div>
    </div>
</div>

<script>
const CONTESTS = {
    'free-daily': { name: 'Free Daily Rush', fee: 0, problems: [
        {title:"Two Sum", difficulty:"Easy", topics:"Array/HashMap", desc:"nums=[2,7,11,15], target=9 ‚Üí [0,1]", sample:"Input: nums=[2,7,11,15], target=9<br>Output: [0,1]"},
        {title:"Valid Parentheses", difficulty:"Easy", topics:"Stack", desc:"()[]{} ‚Üí true", sample:"Input: ()[]{}<br>Output: true"},
        {title:"Palindrome Number", difficulty:"Easy", topics:"Math", desc:"121 ‚Üí true", sample:"Input: 121<br>Output: true"}
    ]},
    'quick-9': { name: 'Quick 9‚Çπ Rush', fee: 9, problems: [
        {title:"Contains Duplicate", difficulty:"Easy", topics:"Array/HashSet", desc:"[1,2,3,1] ‚Üí true", sample:"Input: [1,2,3,1]<br>Output: true"},
        {title:"Roman to Integer", difficulty:"Easy", topics:"HashMap/String", desc:"III ‚Üí 3, LVIII ‚Üí 58", sample:"Input: \"LVIII\"<br>Output: 58"},
        {title:"Maximum Subarray", difficulty:"Medium", topics:"DP/Array", desc:"[-2,1,-3,4,-1,2,1,-5,4] ‚Üí 6", sample:"Input: [-2,1,-3,4,-1,2,1,-5,4]<br>Output: 6"}
    ]}
};

let currentContestId = '';
let timeLeft = 3600;
let timerInterval;

function startContest(contestId) {
    currentContestId = contestId;
    const contest = CONTESTS[contestId];
    
    console.log(`Starting ${contest.name} (Fee: ‚Çπ${contest.fee})`); // DEBUG
    
    if (contest.fee === 0) {
        console.log('FREE - Direct exam');
        showExam();
    } else {
        console.log('PAID - Razorpay opening...');
        const options = {
            key: 'rzp_test_Rxk6YiWLWxsTlb',
            amount: contest.fee * 100,
            currency: 'INR',
            name: 'CodeRush',
            description: contest.name,
            handler: function(response) {
                console.log('‚úÖ PAYMENT SUCCESS!', response);
                alert('‚úÖ Payment Success! Starting exam...');
                showExam();
            },
            prefill: { name: 'Test User', email: 'test@example.com', contact: '9999999999' },
            theme: { color: '#10b981' }
        };
        console.log('Razorpay options:', options);
        const rzp = new Razorpay(options);
        rzp.open();
    }
}

function showExam() {
    document.getElementById('contest-selection').classList.add('hidden');
    document.getElementById('exam-page').classList.remove('hidden');
    
    const contest = CONTESTS[currentContestId];
    document.getElementById('contest-title').textContent = contest.name;
    
    const container = document.getElementById('problems-container');
    container.innerHTML = ''; // Clear previous
    contest.problems.forEach((problem, index) => {
        container.innerHTML += `
            <div class="bg-white/10 backdrop-blur-xl rounded-3xl p-8 border border-white/20">
                <div class="flex justify-between mb-6">
                    <h2 class="text-2xl font-bold">Problem ${index+1}: ${problem.title}</h2>
                    <span class="px-4 py-2 rounded-full ${problem.difficulty === 'Easy' ? 'bg-green-500 text-black' : 'bg-yellow-500 text-black'} font-bold">${problem.difficulty}</span>
                </div>
                <div class="text-slate-300 mb-4">${problem.topics}</div>
                <div class="bg-black/50 p-6 rounded-2xl mb-6">${problem.desc}</div>
                <div class="bg-gray-800 p-4 rounded-xl mb-6 font-mono text-xs">${problem.sample}</div>
                <textarea class="w-full h-48 p-4 bg-black/50 border border-white/30 rounded-2xl text-white font-mono resize-none" placeholder="// Write your solution here..."></textarea>
                <button onclick="submitProblem(${index})" class="mt-4 bg-emerald-500 hover:bg-emerald-600 px-8 py-3 rounded-2xl font-bold text-lg">‚úÖ Submit</button>
            </div>
        `;
    });
    startTimer();
}

function startTimer() {
    timeLeft = 3600;
    if (timerInterval) clearInterval(timerInterval);
    timerInterval = setInterval(() => {
        timeLeft--;
        const mins = Math.floor(timeLeft / 60);
        const secs = timeLeft % 60;
        document.getElementById('timer').textContent = `‚è±Ô∏è ${mins}:${secs.toString().padStart(2,'0')}`;
        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            alert('‚è∞ Time Up!');
        }
    }, 1000);
}

function submitProblem(index) {
    alert(`‚úÖ Problem ${index+1} "${CONTESTS[currentContestId].problems[index].title}" submitted successfully!`);
}

// Global functions for onclick
window.startContest = startContest;
window.submitProblem = submitProblem;
</script>
</body>
</html>
